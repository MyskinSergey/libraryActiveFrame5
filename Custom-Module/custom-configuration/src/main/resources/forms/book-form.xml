<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<configuration xmlns="https://cm5.intertrust.ru/config">

    <form name="book_form" domain-object-type="Lib_Book" is-default="true">
        <markup>
            <header></header>
            <body display-single-tab="true">
                <tab name="Карточка книги">
                    <single-entry-group>
                        <tab-group>
                            <table>

                                <tr>
                                    <td h-align="right">
                                        <widget id="book_name_label"/>
                                    </td>
                                    <td h-align="left">
                                        <widget id="book_name"/>
                                    </td>
                                </tr>

                                <tr>
                                    <td h-align="right">
                                        <widget id="book_description_label"/>
                                    </td>
                                    <td h-align="left">
                                        <widget id="book_description"/>
                                    </td>
                                </tr>

                                <tr>
                                    <td h-align="right">
                                        <widget id="author_label"/>
                                    </td>
                                    <td h-align="left">
                                        <widget id="author"/>
                                    </td>
                                </tr>

                                <tr>
                                    <td h-align="right">
                                        <widget id="qualifier_title_label"/>
                                    </td>
                                    <td h-align="left">
                                        <widget id="qualifier_title"/>
                                    </td>
                                </tr>

                                <tr>
                                    <td h-align="right">
                                        <widget id="logbook_card_label"/>
                                    </td>
                                    <td h-align="left">
                                        <widget id="logbook_card"/>
                                    </td>
                                </tr>

                            </table>
                        </tab-group>
                    </single-entry-group>
                </tab>
            </body>
        </markup>

        <widget-config>

            <label id="book_name_label">
                <field-path/>
                <text>Название книги</text>
            </label>
            <text-box id="book_name">
                <field-path value="name"/>
            </text-box>

            <label id="book_description_label">
                <field-path/>
                <text>Описание книги</text>
            </label>
            <text-box id="book_description">
                <field-path value="description"/>
            </text-box>

            <label id="author_label">
                <field-path/>
                <text>Автор</text>
            </label>
            <suggest-box id="author">
                <field-path value="Author" on-root-delete="unlink"/>
                <collection-ref name="author_collection"/>
                <input-text-filter name="byAuthorName"/>
                <drop-down-pattern value="{author_name} ({author_description})"/>
                <selection-pattern value="{author_name}"/>
                <page-size>30</page-size>
                <selection-style name="table"/>
            </suggest-box>

            <label id="qualifier_title_label">
                <field-path/>
                <text>Классификатор</text>
            </label>
            <suggest-box id="qualifier_title">
                <field-path value="Lib_book_qualifier^Book" on-root-delete="unlink"/>
                <collection-ref name="book_qualifier_qualifiers_collection"/>
                <input-text-filter name="byQualifierTitle"/>
                <drop-down-pattern value="{qualifier_title} ({qualifier_description})"/>
                <selection-pattern value="{qualifier_title}"/>
                <page-size>30</page-size>
                <selection-style name="table"/>
            </suggest-box>

            <label id="logbook_card_label">
                <field-path/>
                <text>Формуляр</text>
            </label>
            <linked-domain-objects-table id="logbook_card" modal-width="500px" modal-height="300px">
                <field-path value="Lib_logbook^Book" on-root-delete="unlink"/>
                <linked-form name="logbook_form" inline="true"/>
                <summary-table>
                    <summary-table-column header="Регистрационный №" widget-id="logbook_number">
                        <pattern value="{Log_Number}"/>
                    </summary-table-column>
                    <summary-table-column header="Год издания" widget-id="logbook_published">
                        <pattern value="{Published}"/>
                    </summary-table-column>
                    <summary-table-column header="Местонахождение" widget-id="logbook_location">
                        <pattern value="{Location}"/>
                    </summary-table-column>
                </summary-table>
                <single-choice value="false"/>
            </linked-domain-objects-table>

        </widget-config>

    </form>
</configuration>